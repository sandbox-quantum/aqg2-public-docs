(()=>{"use strict";class t{static FEATURE_FLAG_DATA_KEY="ff-with";static FEATURE_FLAG_DATASET_KEY="ffWith";static FEATURE_FLAG_HIDE_CLOSEST_DATASET_KEY="ffHideClosest";static FEATURE_FLAG_VALUE_DATASET_KEY="ffValue";static NAVIGATION_FEATURE_FLAGS_KEY="flags";static NAVIGATION_FEATURE_FLAG_ELEMENT_SELECTOR="ff";static NAVIGATION_FEATURE_FLAG_VALUE_DATASET_KEY="ffValue";static FORCE_HIDDEN_CLASS="force-hidden";constructor(t){this.client=t}displayFeatureFlaggedContent(){this.displayFlaggedPage(),this.displayNavigationContent(),this.displayFlaggedContent()}displayFlaggedPage(){const t=document.getElementById("saq-ff-overlay"),e=document.querySelector('meta[name="flags"]');if(!e)return;const a=e.getAttribute("flags").split(","),s=e.getAttribute("flagValues");let i=Array(a.length).fill(!0);s&&(i=s.split(",").map(t=>"True"===t||"False"!==t&&t));let l=!0;for(let t=0;t<a.length&&l;t++)l=l&&i[t]===this.client.getFeatureFlag(a[t]);l?(e.remove(),t&&t.remove()):this.redirect(e.getAttribute("redirectTo"))}displayNavigationContent(){const e=document.querySelectorAll(t.NAVIGATION_FEATURE_FLAG_ELEMENT_SELECTOR);for(const a of e)try{const e=a.attributes[t.NAVIGATION_FEATURE_FLAGS_KEY].value.split(",").map(t=>t.trim());let s=!0;const i=a.dataset[t.NAVIGATION_FEATURE_FLAG_VALUE_DATASET_KEY];void 0!==i&&(s=i,["true","false"].includes(i)&&(s="true"===i));const l=e.reduce((t,e)=>t&&this.client.getFeatureFlag(e)===s,!0),n=a.closest(".md-nav__item");n&&!l?n.remove():a.setAttribute("aria-hidden","false")}catch(t){}}displayFlaggedContent(){const e=document.querySelectorAll(`[data-${t.FEATURE_FLAG_DATA_KEY}]`);for(const a of e)try{const e=a.dataset[t.FEATURE_FLAG_DATASET_KEY].split(",").map(t=>t.trim());let s=!0;const i=a.dataset[t.FEATURE_FLAG_VALUE_DATASET_KEY];void 0!==i&&(s=i,["true","false"].includes(i)&&(s="true"===i));const l=e.reduce((t,e)=>t&&this.client.getFeatureFlag(e)===s,!0);if(!l&&a.dataset[t.FEATURE_FLAG_HIDE_CLOSEST_DATASET_KEY]){const e=a.closest(a.dataset[t.FEATURE_FLAG_HIDE_CLOSEST_DATASET_KEY]);e&&e.remove();continue}l?a.setAttribute("aria-hidden","false"):a.remove()}catch(t){}}redirect(t){window.location.replace(t)}}class e{async init(){try{{const t=await fetch("/auth/");await t.json()}return!0}catch(t){return!1}}}const a="AuthenticatedUser";class s{constructor(){this.presetFlags={},this.defaultFlags={}}getFeatureFlag(t){return t in this.defaultFlags?this.defaultFlags[t]:t in this.presetFlags&&this.presetFlags[t]}async init(){}async loadFeatureFlags(){try{const t="/auth/public/presets",e=await fetch(t),a=await e.json();this.presetFlags={...this.presetFlags,...a.featureFlags}}catch(t){}}async loadAuth(){try{const t=!!this.defaultFlags[a]||await(new e).init();this.presetFlags={...this.presetFlags,[a]:t}}catch(t){}}}window.onload=async()=>{const e=new s;await e.init(),new t(e).displayFeatureFlaggedContent(),document.querySelectorAll(".md-nav--primary").forEach(t=>t.classList.add("navigation-loaded")),document.querySelectorAll(".md-nav--secondary").forEach(t=>t.classList.add("navigation-loaded"))}})();
//# sourceMappingURL=main.js.map